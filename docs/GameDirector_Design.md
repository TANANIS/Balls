# Game Director & Pressure System Design

This document describes the **pressure-driven enemy spawning system** used in this project.
It defines how pressure, spawn pacing, enemy composition, and bosses are coordinated through data-driven rules instead of hard-coded logic.

本文檔說明本專案的「壓力值導向敵人生成系統」。
系統透過資料表驅動，而非寫死在程式碼中，來控制壓力、節奏、怪物組合與首領事件。

## Core Design Principles / 核心設計原則

- Pressure is a **world pacing signal**, not a player stat.
  壓力值代表世界節奏，而非玩家狀態。
- Enemies do NOT read pressure directly.
  敵人本體不可直接存取壓力值。
- All spawn behavior is driven by `SpawnPlan` snapshots generated by the Director.
  所有生成行為必須由 Director 產生的 SpawnPlan 控制。
- Game balance is achieved by **composition and pacing**, not raw stat scaling.
  遊戲平衡依靠節奏與組合，而非單純數值膨脹。

## Data Tables Overview / 資料表總覽

| Table Name | Purpose | 用途 |
|----------|--------|------|
| EnemyDefinitions | Enemy archetypes and base roles | 定義怪物種類與角色定位 |
| PressureTierRules | Pressure tiers and pacing rules | 壓力階段與生成節奏 |
| TierEnemyWeights | Enemy distribution per tier | 各階段怪物權重 |
| PackTemplates | Curated enemy packs | 預設怪物組合模板 |
| BossSchedule | Elite / Boss trigger rules | 首領與菁英觸發規則 |

## EnemyDefinitions

Defines all enemy archetypes.
Defines *what an enemy is*, not *when it spawns*.

定義所有敵人原型，僅描述「是什麼」，不描述「何時出現」。

| Field | Description (EN) | 說明（中文） |
|-----|------------------|-------------|
| id | Unique enemy identifier | 怪物唯一識別 ID |
| role | Combat role (Swarm / Charger / Tank) | 戰鬥定位 |
| cost | Spawn budget cost | 生成預算消耗 |
| min_tier | Earliest pressure tier | 最早出現壓力段 |
| tags | Behavioral tags | 行為標籤 |

### Example

| id | role | cost | min_tier | notes |
|---|---|---|---|---|
| swarm_circle | Swarm | 1 | 0 | Space filler |
| charger_triangle | Charger | 3 | 1 | Burst pressure |
| tank_square | Tank | 4 | 2 | Route blocker |

> 文件建議只放概念與範例；完整平衡數值請放在 `Data/*.csv` 或 `Data/*.tres`。

## Pressure Tiers

Pressure is divided into **five tiers     **.
Each tier represents a different pacing philosophy.

壓力值被分為五個階段，每一段代表不同的世界態度。

| Tier | Range | Design Intent | 設計意圖 |
|----|------|--------------|---------|
| 0 | 0–20 | Learning | 教學與熟悉 |
| 1 | 20–40 | Stable Pressure | 穩定壓力 |
| 2 | 40–60 | Control Slipping | 可控性下降 |
| 3 | 60–80 | Space Collapse | 空間被吃掉 |
| 4 | 80–100 | Breakdown | 崩壞期 |

> Tier progression is continuous via pressure value, not wave count.
>
> Tier 是由壓力值連續推進，而非離散波次。

## Enemy Distribution Rules / 怪物分配規則

Enemy selection follows these rules:

敵人分配遵循以下原則：

1. Tier gating: enemies cannot appear before `min_tier`.
2. Budget-based selection instead of pure random.
3. Pack templates are preferred over raw random rolls.
4. Anti-streak logic prevents repeated identical spawns.

避免問題：

- RNG 連續抽同一種
- 前期突然出高壓怪
- 節奏缺乏可讀性

## Pack Templates

Pack templates define **intentional enemy groupings**.
They are used to shape combat rhythm instead of leaving it to randomness.

模板用來設計節奏，而不是交給亂數。

Example:

- Swarm Blob: many weak enemies
- Charger Spike: single burst threat
- Tank Wall: space denial formation
- Pincer: multi-directional pressure

## Boss and Elite Strategy / 首領與菁英策略

Bosses are treated as **events**, not normal spawns.

首領被視為事件，而非一般生成單位。

Progression:

1. Elite enemies (buffed variants)
2. MiniBoss (single milestone unit)
3. Full Boss (arena or event-based)

This allows gradual escalation without early overcommitment.

## ? Rules for Contributors / 協作者紅線

- Do NOT read pressure value directly in Enemy scripts.
- Do NOT hard-code tier logic outside the Director.
- Modify balance via CSV/tres tables first.
- If behavior feels wrong, adjust pacing before stats.

違反以上規則，代表設計退化。
